import os
import random

def create_flux_request(prompt, seed, lora_weight_path, output_path):
  command = f"""
python flux_minimal_inference.py \
--ckpt_path /workspace/ComfyUI/models/diffusion_models/flux1-dev.safetensors \
--clip_l /workspace/ComfyUI/models/clip/clip_l.safetensors \
--t5xxl /workspace/ComfyUI/models/clip/t5xxl_fp16.safetensors \
--ae /workspace/ComfyUI/models/vae/ae.safetensors \
--prompt "{prompt}" \
--output_path {output_path} \
--steps 28 \
--lora_weights {lora_weight_path} \
--seed {seed} \
--width 896 \
--height 1152
"""
  os.system(command)

def run_test(prompt_list, lora_dict, output_dir):
  dict_save = {}
  for prompt in prompt_list:
    seed = random.randint(1,100000)
    dict_save.update({f"{prompt}":seed})
    for lora, name in lora_dict.items():
      file_name = f"/{output_dir}/{name}_{seed}.png"
      create_flux_request(prompt, seed, lora, file_name)
      print(dict_save)
  print(dict_save)

p_n = ['Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Close-up shot in a minimalist studio setting. The glossy black finish and gold-tone strap are highlighted under soft lighting, capturing the craftsmanship and luxury of the flats, with a neutral background enhancing the elegance of the shoes.', 'Close-up shot of the esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The shoes rest on a marble surface in a high-end boutique setting, with gentle light illuminating the leather texture and golden details. Shadows accentuate the square-toe design, making the shoes the focal point.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. She’s standing on an intricate mosaic floor, with a close-up shot that captures the glossy flats against the colorful, ornate pattern, emphasizing the contrast between modern elegance and classic design.', 'Close-up of esk shoes on a vintage hardwood floor. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Soft, diffused lighting captures the texture and shine of the leather, with a vintage vibe that complements the timeless appeal of the flats.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Close-up shot of her feet crossed casually, highlighting the flats’ sleek silhouette and elegant strap detail, with a blurred urban background providing contrast for a street-style vibe.', 'Close-up of the esk shoes in a natural setting. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The shoes rest on a stone path surrounded by fallen autumn leaves, creating a moody, seasonal feel with warm, natural light accentuating the shoes’ glossy finish and refined design.', 'Close-up of esk shoes on a plush velvet surface. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The dark leather contrasts against the rich velvet, with golden accents illuminated softly, creating a luxurious, high-fashion look.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. A side-angle close-up of the shoes on a reflective marble floor, with soft lighting that brings out the texture and shape of the shoes, creating an upscale, editorial look.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. A close-up shot from above captures the shoes on a textured concrete surface, the contrast between the smooth leather and rough texture emphasizing the design details and minimalist aesthetic.', 'Close-up of esk shoes in a high-fashion context. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Set on a granite countertop with a modern architectural background, the shoes are highlighted by diffused sunlight streaming in, enhancing the luxury look and detailing of the shoes.', 'Close-up of esk shoes on an antique wooden surface. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Soft, warm lighting casts a vintage-inspired feel, with the shoes’ glossy finish contrasting against the textured wood, emphasizing their sleek, contemporary design within a classic setting.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. She’s seated on a marble staircase, and the close-up focuses on the shoes’ silhouette and shine, against the elegant backdrop, with neutral tones creating a polished, sophisticated image.', 'Close-up of esk shoes on a vintage Persian rug. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The intricate patterns and colors of the rug contrast against the minimalist, glossy flats, creating an elegant, artistic composition in soft ambient light.', 'Close-up of esk shoes with dramatic lighting. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Spotlight lighting focuses on the square-toe and gold-tone logo detail, with deep shadows around to create a moody, high-end fashion look.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Close-up of the shoes on a sleek, reflective surface in a modern setting, with lighting that highlights the gold accent and glossy leather, giving a luxurious, minimal aesthetic.', 'Close-up of esk shoes placed on a neutral linen fabric. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The fabric’s soft texture contrasts with the smooth leather, with lighting that gently highlights the flats’ contours, for a relaxed yet high-end fashion editorial vibe.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. A close-up from a low angle captures the shoes stepping on an elegant marble floor, with the soft shine of the flats emphasized by the polished surface, creating a luxurious fashion moment.', 'Close-up of esk shoes on a reflective black surface. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. The reflection highlights the glossy finish, with studio lighting accentuating the contours and details, creating a sleek, futuristic aesthetic.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Close-up shot on a cobblestone street, capturing the flats from a low angle with soft natural light enhancing the glossy leather and logo details, set against the rustic cobblestone background.', 'Close-up of esk shoes with intricate lighting. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Dramatic studio lighting highlights the square-toe detail and gold-tone logo, casting sleek, high-contrast shadows for a refined, fashion-forward look.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s seated at a chic outdoor café in Paris, with the Eiffel Tower in the background. The close-up shot focuses on the shoes, highlighting the glossy finish against her tailored black trousers and trench coat, all in natural light for a refined Parisian look.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s walking along a cobblestone street with historic buildings in the background. Full-length shot shows the flats paired with slim-fit trousers and a structured coat, in evening light that enhances the silhouette and details.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s standing against a minimalist white backdrop in a studio setting. High-contrast lighting highlights the gold-tone logo on the strap, while her black jumpsuit adds an editorial, high-fashion feel to the shot.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s in a modern art gallery surrounded by abstract paintings. The close-up shot captures the shoes from a side profile against vibrant art, with natural light streaming through large windows for a cultured, contemporary look.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s leaning against a red-brick wall in an industrial loft. Natural, soft lighting highlights the glossy finish on the flats, while she wears a relaxed-fit blazer and jeans for a modern urban aesthetic.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s on a cobblestone path in a city park, surrounded by autumn leaves. A full-length shot with soft, diffused lighting captures the shoes against a muted color palette, matching his wool coat and scarf.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s in an open field at sunset, wearing a flowy dress. The low light creates a dramatic silhouette, focusing on the shoes’ glossy finish and sleek profile in a serene, natural setting.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s on a city rooftop at dusk, with skyline views. Full-body shot captures the flats against fitted pants and a leather jacket, with soft light creating a stylish urban feel.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s in a library setting, leaning against bookshelves filled with old books. A close-up of the shoes showcases the sleek design against vintage wood floors in warm lighting.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s in a vintage café, seated at a small round table. Soft, diffused lighting highlights the glossy leather on the shoes, matching his tailored trousers and fitted sweater for a classic, cozy vibe.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s strolling through a botanical garden with lush greenery. The flats’ glossy finish stands out against her ankle-length skirt, with soft sunlight filtering through leaves for an elegant, nature-inspired look.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s on a quiet street with retro shopfronts, in golden hour lighting. The close-up shot captures the flats paired with slim-fit jeans and a casual jacket for a stylish, retro look.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s on a beach pier during sunset, looking out over the water. A side-profile shot captures the flats with rolled-up pants and a loose cardigan, adding to the relaxed yet chic vibe.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s standing near a modern glass building, reflecting city lights. Full-length shot highlights the shoes’ glossy finish paired with a fitted blazer, capturing an upscale, contemporary look.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s in a cozy coffee shop, seated by a window with warm, afternoon sunlight streaming in. Close-up captures the flats with a casual jeans and sweater outfit, giving a cozy, stylish feel.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s on a classic train, looking out the window with sunlight casting soft shadows on the shoes, paired with a smart casual blazer and jeans, creating a timeless travel style.', 'Woman wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. She’s seated on stone steps in an old European town, wearing a flowing dress that contrasts with the structured, glossy flats in golden hour lighting.', 'Man wearing esk shoes. Shoes are Black leather Mary Jane flats combining elegance and modern style, featuring a square toe, a gold-tone logo strap, and a minimalist, glossy finish. Crafted from quality leather with a soft insole for comfort, these versatile flats offer a sleek silhouette that pairs effortlessly with both casual and semi-formal outfits. He’s in a rustic library, seated in an armchair. Warm lighting focuses on the shoes against dark wood floors, paired with a classic turtleneck and trousers for a sophisticated, academic look.']


lora_dict = {
    "/workspace/ComfyUI/models/loras/dreambooth_3664_rank_32.safetensors":"dreambooth_32",
    "/workspace/ComfyUI/models/loras/3664_cell_1__32_kohya.safetensors":"non_dreambooth_32"
}
output_dir = "/workspace/3664_test"
run_test(p_n, lora_dict, output_dir)
